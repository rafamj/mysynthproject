#include "synth.h"

int counter;
AlsaOut asound("default");
AlsaSeq aseq;
OscDiv osc[12];
Switch sw;
Midi2Control ctrl;
sample *mean_0_aux_0[128];
Mean mean_0(mean_0_aux_0,128);
Constant const_0(4186);
Constant const_1(4434);
Constant const_2(4698);
Constant const_3(4978);
Constant const_4(5274);
Constant const_5(5587);
Constant const_6(5919);
Constant const_7(6271);
Constant const_8(6644);
Constant const_9(7040);
Constant const_10(7458);
Constant const_11(7902);

void connectDevices() {
  sw.connectM(0,&aseq,0);
  sw.connect(0,&osc[0],0);
  sw.connect(1,&osc[0],1);
  sw.connect(2,&osc[0],2);
  sw.connect(3,&osc[0],3);
  sw.connect(4,&osc[0],4);
  sw.connect(5,&osc[0],5);
  sw.connect(6,&osc[0],6);
  sw.connect(7,&osc[0],7);
  sw.connect(8,&osc[1],0);
  sw.connect(9,&osc[1],1);
  sw.connect(10,&osc[1],2);
  sw.connect(11,&osc[1],3);
  sw.connect(12,&osc[1],4);
  sw.connect(13,&osc[1],5);
  sw.connect(14,&osc[1],6);
  sw.connect(15,&osc[1],7);
  sw.connect(16,&osc[2],0);
  sw.connect(17,&osc[2],1);
  sw.connect(18,&osc[2],2);
  sw.connect(19,&osc[2],3);
  sw.connect(20,&osc[2],4);
  sw.connect(21,&osc[2],5);
  sw.connect(22,&osc[2],6);
  sw.connect(23,&osc[2],7);
  sw.connect(24,&osc[3],0);
  sw.connect(25,&osc[3],1);
  sw.connect(26,&osc[3],2);
  sw.connect(27,&osc[3],3);
  sw.connect(28,&osc[3],4);
  sw.connect(29,&osc[3],5);
  sw.connect(30,&osc[3],6);
  sw.connect(31,&osc[3],7);
  sw.connect(32,&osc[4],0);
  sw.connect(33,&osc[4],1);
  sw.connect(34,&osc[4],2);
  sw.connect(35,&osc[4],3);
  sw.connect(36,&osc[4],4);
  sw.connect(37,&osc[4],5);
  sw.connect(38,&osc[4],6);
  sw.connect(39,&osc[4],7);
  sw.connect(40,&osc[5],0);
  sw.connect(41,&osc[5],1);
  sw.connect(42,&osc[5],2);
  sw.connect(43,&osc[5],3);
  sw.connect(44,&osc[5],4);
  sw.connect(45,&osc[5],5);
  sw.connect(46,&osc[5],6);
  sw.connect(47,&osc[5],7);
  sw.connect(48,&osc[6],0);
  sw.connect(49,&osc[6],1);
  sw.connect(50,&osc[6],2);
  sw.connect(51,&osc[6],3);
  sw.connect(52,&osc[6],4);
  sw.connect(53,&osc[6],5);
  sw.connect(54,&osc[6],6);
  sw.connect(55,&osc[6],7);
  sw.connect(56,&osc[7],0);
  sw.connect(57,&osc[7],1);
  sw.connect(58,&osc[7],2);
  sw.connect(59,&osc[7],3);
  sw.connect(60,&osc[7],4);
  sw.connect(61,&osc[7],5);
  sw.connect(62,&osc[7],6);
  sw.connect(63,&osc[7],7);
  sw.connect(64,&osc[8],0);
  sw.connect(65,&osc[8],1);
  sw.connect(66,&osc[8],2);
  sw.connect(67,&osc[8],3);
  sw.connect(68,&osc[8],4);
  sw.connect(69,&osc[8],5);
  sw.connect(70,&osc[8],6);
  sw.connect(71,&osc[8],7);
  sw.connect(72,&osc[9],0);
  sw.connect(73,&osc[9],1);
  sw.connect(74,&osc[9],2);
  sw.connect(75,&osc[9],3);
  sw.connect(76,&osc[9],4);
  sw.connect(77,&osc[9],5);
  sw.connect(78,&osc[9],6);
  sw.connect(79,&osc[9],7);
  sw.connect(80,&osc[10],0);
  sw.connect(81,&osc[10],1);
  sw.connect(82,&osc[10],2);
  sw.connect(83,&osc[10],3);
  sw.connect(84,&osc[10],4);
  sw.connect(85,&osc[10],5);
  sw.connect(86,&osc[10],6);
  sw.connect(87,&osc[10],7);
  sw.connect(88,&osc[11],0);
  sw.connect(89,&osc[11],1);
  sw.connect(90,&osc[11],2);
  sw.connect(91,&osc[11],3);
  sw.connect(92,&osc[11],4);
  sw.connect(93,&osc[11],5);
  sw.connect(94,&osc[11],6);
  sw.connect(95,&osc[11],7);
  ctrl.connectM(0,&aseq,0);
  mean_0.connect(0,&sw,0);
  mean_0.connect(1,&sw,1);
  mean_0.connect(2,&sw,2);
  mean_0.connect(3,&sw,3);
  mean_0.connect(4,&sw,4);
  mean_0.connect(5,&sw,5);
  mean_0.connect(6,&sw,6);
  mean_0.connect(7,&sw,7);
  mean_0.connect(8,&sw,8);
  mean_0.connect(9,&sw,9);
  mean_0.connect(10,&sw,10);
  mean_0.connect(11,&sw,11);
  mean_0.connect(12,&sw,12);
  mean_0.connect(13,&sw,13);
  mean_0.connect(14,&sw,14);
  mean_0.connect(15,&sw,15);
  mean_0.connect(16,&sw,16);
  mean_0.connect(17,&sw,17);
  mean_0.connect(18,&sw,18);
  mean_0.connect(19,&sw,19);
  mean_0.connect(20,&sw,20);
  mean_0.connect(21,&sw,21);
  mean_0.connect(22,&sw,22);
  mean_0.connect(23,&sw,23);
  mean_0.connect(24,&sw,24);
  mean_0.connect(25,&sw,25);
  mean_0.connect(26,&sw,26);
  mean_0.connect(27,&sw,27);
  mean_0.connect(28,&sw,28);
  mean_0.connect(29,&sw,29);
  mean_0.connect(30,&sw,30);
  mean_0.connect(31,&sw,31);
  mean_0.connect(32,&sw,32);
  mean_0.connect(33,&sw,33);
  mean_0.connect(34,&sw,34);
  mean_0.connect(35,&sw,35);
  mean_0.connect(36,&sw,36);
  mean_0.connect(37,&sw,37);
  mean_0.connect(38,&sw,38);
  mean_0.connect(39,&sw,39);
  mean_0.connect(40,&sw,40);
  mean_0.connect(41,&sw,41);
  mean_0.connect(42,&sw,42);
  mean_0.connect(43,&sw,43);
  mean_0.connect(44,&sw,44);
  mean_0.connect(45,&sw,45);
  mean_0.connect(46,&sw,46);
  mean_0.connect(47,&sw,47);
  mean_0.connect(48,&sw,48);
  mean_0.connect(49,&sw,49);
  mean_0.connect(50,&sw,50);
  mean_0.connect(51,&sw,51);
  mean_0.connect(52,&sw,52);
  mean_0.connect(53,&sw,53);
  mean_0.connect(54,&sw,54);
  mean_0.connect(55,&sw,55);
  mean_0.connect(56,&sw,56);
  mean_0.connect(57,&sw,57);
  mean_0.connect(58,&sw,58);
  mean_0.connect(59,&sw,59);
  mean_0.connect(60,&sw,60);
  mean_0.connect(61,&sw,61);
  mean_0.connect(62,&sw,62);
  mean_0.connect(63,&sw,63);
  mean_0.connect(64,&sw,64);
  mean_0.connect(65,&sw,65);
  mean_0.connect(66,&sw,66);
  mean_0.connect(67,&sw,67);
  mean_0.connect(68,&sw,68);
  mean_0.connect(69,&sw,69);
  mean_0.connect(70,&sw,70);
  mean_0.connect(71,&sw,71);
  mean_0.connect(72,&sw,72);
  mean_0.connect(73,&sw,73);
  mean_0.connect(74,&sw,74);
  mean_0.connect(75,&sw,75);
  mean_0.connect(76,&sw,76);
  mean_0.connect(77,&sw,77);
  mean_0.connect(78,&sw,78);
  mean_0.connect(79,&sw,79);
  mean_0.connect(80,&sw,80);
  mean_0.connect(81,&sw,81);
  mean_0.connect(82,&sw,82);
  mean_0.connect(83,&sw,83);
  mean_0.connect(84,&sw,84);
  mean_0.connect(85,&sw,85);
  mean_0.connect(86,&sw,86);
  mean_0.connect(87,&sw,87);
  mean_0.connect(88,&sw,88);
  mean_0.connect(89,&sw,89);
  mean_0.connect(90,&sw,90);
  mean_0.connect(91,&sw,91);
  mean_0.connect(92,&sw,92);
  mean_0.connect(93,&sw,93);
  mean_0.connect(94,&sw,94);
  mean_0.connect(95,&sw,95);
  mean_0.connect(96,&sw,96);
  mean_0.connect(97,&sw,97);
  mean_0.connect(98,&sw,98);
  mean_0.connect(99,&sw,99);
  mean_0.connect(100,&sw,100);
  mean_0.connect(101,&sw,101);
  mean_0.connect(102,&sw,102);
  mean_0.connect(103,&sw,103);
  mean_0.connect(104,&sw,104);
  mean_0.connect(105,&sw,105);
  mean_0.connect(106,&sw,106);
  mean_0.connect(107,&sw,107);
  mean_0.connect(108,&sw,108);
  mean_0.connect(109,&sw,109);
  mean_0.connect(110,&sw,110);
  mean_0.connect(111,&sw,111);
  mean_0.connect(112,&sw,112);
  mean_0.connect(113,&sw,113);
  mean_0.connect(114,&sw,114);
  mean_0.connect(115,&sw,115);
  mean_0.connect(116,&sw,116);
  mean_0.connect(117,&sw,117);
  mean_0.connect(118,&sw,118);
  mean_0.connect(119,&sw,119);
  mean_0.connect(120,&sw,120);
  mean_0.connect(121,&sw,121);
  mean_0.connect(122,&sw,122);
  mean_0.connect(123,&sw,123);
  mean_0.connect(124,&sw,124);
  mean_0.connect(125,&sw,125);
  mean_0.connect(126,&sw,126);
  mean_0.connect(127,&sw,127);
  asound.connect(0,&mean_0,0);
  asound.inputs[1]=asound.inputs[0];
  osc[0].connect(0,&const_0,0);
  osc[1].connect(0,&const_1,0);
  osc[2].connect(0,&const_2,0);
  osc[3].connect(0,&const_3,0);
  osc[4].connect(0,&const_4,0);
  osc[5].connect(0,&const_5,0);
  osc[6].connect(0,&const_6,0);
  osc[7].connect(0,&const_7,0);
  osc[8].connect(0,&const_8,0);
  osc[9].connect(0,&const_9,0);
  osc[10].connect(0,&const_10,0);
  osc[11].connect(0,&const_11,0);
}

void cycle() {
  osc[0].cycle();
  osc[1].cycle();
  osc[2].cycle();
  osc[3].cycle();
  osc[4].cycle();
  osc[5].cycle();
  osc[6].cycle();
  osc[7].cycle();
  osc[8].cycle();
  osc[9].cycle();
  osc[10].cycle();
  osc[11].cycle();
  sw.cycle();
  mean_0.cycle();
}

void setup() {
  counter=0;
  aseq.open();
  asound.open();
  connectDevices();
}


extern int async_loop(AlsaSeq *aseq, AlsaOut *aOut, AlsaIn *aIn, void (*cycle)());

int main() {
  setup();
  async_loop(&aseq,&asound,0,cycle);
}
